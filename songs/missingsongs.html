
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Fehlende Songdateien</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 30px; }
        h1 { color: #333; }
        ul { list-style: none; padding: 0; }
        li { padding: 4px 0; }
        .missing { color: red; }
        .found { color: #555; }
        label { margin-right: 10px; }
    </style>
</head>
<body>
    <h1>Fehlende Songdateien</h1>
    <p>
        Lade die <strong>songs</strong>-Dateien (z.B. <code>1.txt</code> bis <code>123.txt</code>) hier hoch:<br>
        <input type="file" id="fileInput" multiple accept=".txt">
    </p>
    <label>
        Bis zu welcher Nummer soll geprüft werden?
        <input type="number" min="1" max="9999" value="123" id="maxNum" style="width: 60px;">
    </label>
    <button onclick="checkFiles()">Prüfen</button>
    <h2>Ergebnis</h2>
    <ul id="missingList"></ul>

    <script>
        let selectedFiles = [];

        document.getElementById('fileInput').addEventListener('change', function(event) {
            selectedFiles = Array.from(event.target.files);
        });

        function checkFiles() {
            const max = parseInt(document.getElementById('maxNum').value, 10);
            const fileNames = selectedFiles.map(f => f.name);
            const existingNumbers = new Set(
                fileNames
                    .map(n => n.match(/^(\d+)\.txt$/))
                    .filter(Boolean)
                    .map(m => parseInt(m[1], 10))
            );

            const missing = [];
            for (let i = 1; i <= max; i++) {
                if (!existingNumbers.has(i)) {
                    missing.push(i);
                }
            }

            const ul = document.getElementById('missingList');
            ul.innerHTML = '';

            if (missing.length === 0) {
                ul.innerHTML = '<li class="found">Es fehlen keine Dateien im Bereich 1 bis ' + max + '.</li>';
            } else {
                missing.forEach(num => {
                    const li = document.createElement('li');
                    li.textContent = `Fehlt: ${num}.txt`;
                    li.className = 'missing';
                    ul.appendChild(li);
                });
            }
        }
    </script>
</body>
</html>
